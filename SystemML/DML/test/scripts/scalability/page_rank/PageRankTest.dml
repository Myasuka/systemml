# test PageRank
# sparse
G = readMM("test/scripts/scalability/page_rank/in/g", rows=$$0$$, cols=$$0$$, format="text");
# dense
p = readMM("test/scripts/scalability/page_rank/in/p", rows=$$0$$, cols=1, format="text");
e = readMM("test/scripts/scalability/page_rank/in/e", rows=$$0$$, cols=1, format="text");
u = readMM("test/scripts/scalability/page_rank/in/u", rows=1, cols=$$0$$, format="text");
alpha = 0.85;
max_iteration = 20;
i = 0;

p = (G %*% e) %*% (u %*% G);

#while(i < max_iteration) {
#	p = alpha * (G %*% p) + (1 - alpha) * (e %*% u %*% p);
#	i = i + 1;
#}

writeMM(p, "test/scripts/scalability/page_rank/out/p", format="text");